<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contrast Sensitivity Tool Documentation</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <nav id="navbar">
            <h2>Contents</h2>
            <ul>
                <li><a href="#Intro" class="nav-link">Introduction</a></li>
                <li><a href="#Setup" class="nav-link">Tool Setup</a></li>
                <li><a href="#ToolMenu" class="nav-link">Tool Menu Explanation</a></li>
                <li><a href="#ControllerOrKeyboardSetup" class="nav-link">Controller or Keyboard Setup</a></li>
                <li><a href="#ResultsJsonFile" class="nav-link">Results File</a></li>
		<li><a href="#DataProcessing" class="nav-link">Data Processing</a></li>
            </ul>
        </nav>

        <main id="main-doc">
            <header>
                <img src="Images/teaser.png" alt="Teaser Image" class="header-image"/>
                <h1>Contrast Sensitivity Tool Documentation</h1>
            </header>

            <section id="Intro">
				<h2><a href="../tool/index.html"><img src="Images/link-icon.png" alt="Link Icon" width="15px" height="15px"/></a>
					Introduction</h2> 
                <p>
					The contrast sensitivity tool evaluates the monocular and/or binocular contrast perception on head-mounted display (HMD).  This experiment is compatible for Oculus Quest 2 or 3 devices. Contrast sensitivity response (CSR), as the reciprocol of the threshold (minimum) contrast of the human participant, is measured at various spatial frequencies. This is achieved using a 2D sinusoidal pattern with predefined contrast and spatial frequency, known as a Gabor target. The Gabor target can be rendered at a single or multiple locations across the display field of view (FOV). The tool ensures that the sinusoidal contrast pattern remains circular (or perpendicular to the radial direction) relative to the target location, as this orientation effectively captures contrast degradation caused by optical aberrations.
					<br/><br/>
					In the experiment, the location, size, spatial frequency range, and background noise of the Gabor target can be adjusted during initial setup. The depth of the target is fixed at a long distance of 150 m. During the perceptual experiments, the target's contrast can be incremented or decremented by adjusting the display gray level using a headset controller or Bluetooth keyboard until reaching the threshold contrast of each trial. At the end of the experiment, all trial data is saved as a JSON file. Statistical analysis of the results measured on mulitple human participants is applied to obtain the CSR of users within a group (e.g., similar interpuillary distance settings, age, or visual acuity etc).
					</p>
			</section>

			<section id="Setup">
				<h2>Setup</h2>
				<p> This experiment is compatible for Oculus Quest 2 or 3 devices. You can modify any of the values in the menu using a bluetooth keyboard or controller. The experiment is designed in WebXR and can be access from the Browser app of the Quest 2 or 3. 
					The experiment will run from the min frequency to max frequency over a fixed position in the center of FOV or 9 different positions across FOV. When the experiment is set to run over 9 locations, the first trial is a test trial and will be recorded in the results file. You may choose to ignore that during final evalution. If you choose to only run the experiment in the center of the HMD FOV, each trial counts as one trial.
					The min frequency, max frequency and step frequency are measured in cycles per degree meaning that we divide these values by 26 in our code in order to account for the angle between the headset and the target. The total number of trials is inclusive of the max frequency. 
					Size is the standard deviation of the gaussian distribution of the target measured in meters according to the WebXR documentation. The shift is the distance between targets when they move over 9 positions which is measured in meters according to the WebXR documentation. The background noise checkbox opens the noise and gaussian sigma menu which allows the user to adjust the noise and standard deviation in grey levels.
					Below is detailed information on the units associated with each value in the menu.</p>
			</section>

			<section id="ToolMenu">
				<h2>
					Tool Menu Explaination
				</h2>
				
				<ul>
					<li><strong>Partcipant ID: </strong>A unique identifier of choice for the  trial.</li>
					<li><strong>Size: </strong>The size of the gabor patch in pixels. Users can adjust it in meters based on the WebXR documentation.</li>
					<li><strong>Min Frequency: </strong>Spatial frequency of the patch when the experiment begins. Min value is 0.5. </b></li>
					<li><strong>Max Frequency: </strong>Spatial frequency of the patch when the experiment ends. Max value is 6 due to headset antialiasing. </b></li>
					<li><strong>Step Frequency: </strong>Spatial frequency to increment the patch by. Value must be between min and max frequency. </b></li>
					<li><strong>Shift: </strong>The distance between targets in terms of meters based on the WebXR documentation. </b></li>
					<li><strong>9 positions: </strong>Checking this box allows the experiment to loop the frequency over 9 positions accross the FOV determined by the shift. </b></li>
					<li><strong>Background Noise: </strong>Checking this box opens the noise and gaussian sigma menu options. </b></li>
					<li><strong>Noise Sigma: </strong>Standard deviation in gray levels (0-255)</b></li>
					<li><strong>Gaussian Sigma: </strong> Adds the blur behind the target per location. Ranges from 0 to 9 only.  </b></li>

				</ul> 
			
				</p>
			</section>

			<section id="ControllerOrKeyboardSetup" class="image-text-section">
				<h2>Controller Or Keyboard Setup</h2>
				<div class="content-wrapper">
					<img src="./Images/controller.png" alt="Controller setup" class="section-image" />
					<div class="text-content">
						<ul>
							<li><strong>a: </strong>Confirm contrast level and move to next target</li>
							<li><strong>b: </strong>To reset contrast of gabor to 1 when user can't visibly see the target</li>
							<li><strong>Arrow/thumbstick up: </strong>Increase contrast of current target</li>
							<li><strong>Arrow/thumbstick down: </strong>Decrease contrast of current target</li>
							<li><strong>esc: </strong>Exit immersive mode</li>
						</ul>
					</div>
				</div>
			</section>
			
			<section id="ResultsJsonFile" class="image-text-section">
				<h2>Downloaded Results File</h2>
				<div class="content-wrapper">
					<img src="./Images/results.png" alt="Results file" class="section-image" />
					<div class="text-content">
						<p>
							The json file compiles the results of the experiment. The json file has the following format where the participant id 
							is noted above and for each frequency, the threshold contrast, the frequency, the max frequency, the size standard deviation,
							the position of the target, and the trial time needed to complete the trial are noted. Additionally, information on the locations 
							of the target and background noise asscociated with each target are noted at top. All the data in each trial is stored in the responses
							array of the file. 
						</p>
					</div>
				</div>
			</section>

			<section id="ResultsJsonFile" class="image-text-section">
				<h2>Data Processesing</h2>
				<div class="content-wrapper">
					<div class="text-content">
				                <a href="https://webxr-tool.streamlit.app"> Upload your results from this experiment to plot results, including standard deviation and standard error </a>
				            </p>
				        </div>
				</div>
			</section>
		</main>
	</div>
</body>
</html>
